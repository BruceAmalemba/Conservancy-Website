<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net https://unpkg.com https://js.stripe.com https://www.marzipano.net https://api.weatherapi.com; style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; img-src 'self' data: https://*.ambururuwaterfalls.com; connect-src 'self' https://api.x.ai https://api.stripe.com https://api.weatherapi.com; frame-src 'self' https://js.stripe.com; media-src 'self' https://*.ambururuwaterfalls.com; font-src 'self' https://fonts.gstatic.com;">
    <title>Gallery - Ambururu Waterfalls & Resort | Siaya, Kenya</title>
    <meta name="description" content="Explore stunning photos, videos, AR experiences, and 360° tours showcasing Ambururu Waterfalls & Resort’s eco-luxury and Luo heritage in Siaya, Kenya.">
    <meta name="keywords" content="Ambururu Waterfalls, Siaya, Kenya, gallery, AR, 360 tour, eco-tourism, Luo culture, resort, cultural heritage">
    <meta name="author" content="Ambururu Waterfalls & Resort">
    <meta name="robots" content="index, follow">
    <!-- Open Graph -->
    <meta property="og:title" content="Gallery - Ambururu Waterfalls & Resort">
    <meta property="og:description" content="Discover captivating visuals, AR experiences, and cultural stories of Ambururu’s eco-luxury resort in Siaya, Kenya.">
    <meta property="og:image" content="/assets/images/gallery-hero.avif">
    <meta property="og:url" content="https://www.ambururuwaterfalls.com/gallery">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@AmbururuResort">
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ImageGallery",
        "name": "Ambururu Waterfalls & Resort Gallery",
        "description": "A collection of photos, videos, AR experiences, and 360° tours showcasing Ambururu Waterfalls & Resort in Siaya, Kenya.",
        "url": "https://www.ambururuwaterfalls.com/gallery",
        "image": [
            "/assets/images/sunrise-cascades.avif",
            "/assets/images/eco-luxury-suite.avif",
            "/assets/images/cultural-festival.avif"
        ],
        "associatedMedia": [
            {
                "@type": "VideoObject",
                "name": "Ambururu Waterfalls Experience",
                "description": "A cinematic tour of Ambururu’s scenic views and activities.",
                "contentUrl": "/assets/videos/ambururu-tour.mp4",
                "thumbnailUrl": "/assets/images/video-poster.avif",
                "uploadDate": "2025-01-01",
                "duration": "PT1M30S"
            }
        ]
    }
    </script>
    <!-- Preload Critical Assets -->
    <link rel="preload" href="/assets/fonts/CinzelDecorative-Variable.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/assets/images/gallery-hero.avif" as="image" fetchpriority="high">
    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Cinzel+Decorative:wght@400;700&family=Playfair+Display:wght@400;700&display=swap">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous">
    <!-- PhotoSwipe -->
    <link rel="stylesheet" href="https://unpkg.com/photoswipe@5.4.2/dist/photoswipe.css">
    <!-- Plyr -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0a1a24">
    <style>
        :root {
            --jade-deep: #0a2f24;
            --jade-light: #1e4c3e;
            --gold-luxe: #b8971c;
            --luo-crimson: #8b1a07;
            --midnight-blue: #0a1a24;
            --cream-soft: #f5e8d8;
            --glass-bg: rgba(245, 232, 216, 0.2);
            --shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            --glow: rgba(184, 151, 28, 0.3);
            --font-heading: 'Cinzel Decorative', serif;
            --font-body: 'Inter', sans-serif;
            --font-serif: 'Playfair Display', serif;
            --transition: all 0.3s ease;
            --gradient-accent: linear-gradient(135deg, var(--gold-luxe), var(--luo-crimson));
        }

        .dark-theme {
            --jade-deep: #081f1a;
            --cream-soft: #e0e8d0;
            --midnight-blue: #030c12;
            background: var(--midnight-blue);
        }

        .high-contrast {
            --jade-deep: #002a1f;
            --gold-luxe: #ffff00;
            --cream-soft: #ffffff;
            --midnight-blue: #000000;
            filter: contrast(150%);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        body {
            font-family: var(--font-body);
            color: var(--cream-soft);
            background: var(--midnight-blue);
            line-height: 1.6;
        }

        a, button {
            text-decoration: none;
            color: inherit;
            cursor: pointer;
            transition: var(--transition);
        }

        h1, h2, h3, h4 {
            font-family: var(--font-heading);
            font-weight: 700;
            letter-spacing: 0.03em;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--gold-luxe);
            color: var(--midnight-blue);
            padding: 8px 16px;
            z-index: 10000;
            font-weight: 600;
        }

        .skip-link:focus {
            top: 0;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: var(--gradient-accent);
            width: 0;
            z-index: 1000;
        }

        .sticky-header {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(10, 26, 36, 0.95);
            backdrop-filter: blur(8px);
            padding: 0.8rem 0;
            box-shadow: var(--shadow);
        }

        .sticky-header.hidden {
            transform: translateY(-100%);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .brand {
            display: flex;
            align-items: center;
        }

        .logo {
            width: 60px;
            height: 60px;
        }

        .brand h1 {
            font-size: 1.5rem;
            color: var(--gold-luxe);
            margin-left: 0.8rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            margin-left: auto;
        }

        nav ul li a {
            font-size: 0.95rem;
            color: var(--cream-soft);
            padding: 0.5rem 1rem;
            position: relative;
        }

        nav ul li a:hover,
        nav ul li a.active {
            color: var(--gold-luxe);
        }

        nav ul li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gold-luxe);
            transition: width 0.3s ease;
        }

        nav ul li a:hover::after,
        nav ul li a.active::after {
            width: 100%;
        }

        .dropdown {
            position: relative;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--jade-deep);
            border-radius: 8px;
            box-shadow: var(--shadow);
            min-width: 200px;
            padding: 0.5rem 0;
        }

        .dropdown:hover .dropdown-menu,
        .dropdown:focus-within .dropdown-menu {
            display: block;
        }

        .dropdown-menu a {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        .language-toggle select {
            padding: 0.5rem;
            background: var(--jade-deep);
            color: var(--cream-soft);
            border: 1px solid var(--gold-luxe);
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .dark-mode-toggle,
        .contrast-toggle {
            background: none;
            border: none;
            color: var(--gold-luxe);
            font-size: 1.2rem;
            margin-left: 1rem;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--gold-luxe);
            font-size: 1.5rem;
        }

        .hero {
            position: relative;
            height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--cream-soft);
            overflow: hidden;
        }

        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            filter: brightness(0.5);
        }

        .hero-overlay {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 12px;
            border: 2px solid var(--jade-light);
            max-width: 800px;
        }

        .hero-overlay h2 {
            font-size: clamp(2rem, 4vw, 2.5rem);
            color: var(--gold-luxe);
            margin-bottom: 1rem;
        }

        .hero-overlay p {
            font-size: clamp(1rem, 2vw, 1.2rem);
            font-family: var(--font-serif);
            margin-bottom: 1.5rem;
        }

        .cta-button {
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            padding: 0.8rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
        }

        .music-player {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 999;
            background: var(--glass-bg);
            border-radius: 50%;
            padding: 10px;
            backdrop-filter: blur(8px);
        }

        .music-player button {
            background: none;
            border: none;
            color: var(--gold-luxe);
            font-size: 1.2rem;
        }

        .virtual-assistant {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 1000;
        }

        .assistant-orb {
            width: 50px;
            height: 50px;
            background: var(--gradient-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .assistant-orb i {
            font-size: 1.5rem;
            color: var(--midnight-blue);
        }

        .assistant-chat {
            display: none;
            position: absolute;
            bottom: 60px;
            right: 0;
            background: var(--jade-deep);
            padding: 1rem;
            border-radius: 10px;
            width: 300px;
            box-shadow: var(--shadow);
        }

        .assistant-orb.active + .assistant-chat {
            display: block;
        }

        .assistant-chat input {
            padding: 0.8rem;
            border-radius: 6px;
            border: 1px solid var(--jade-light);
            background: var(--midnight-blue);
            color: var(--cream-soft);
            font-size: 0.9rem;
        }

        .assistant-chat button {
            background: var(--gold-luxe);
            color: var(--midnight-blue);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .chat-history {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 0.5rem;
            padding: 0.5rem;
            background: var(--midnight-blue);
            border-radius: 6px;
        }

        .chat-message {
            margin-bottom: 0.5rem;
            padding: 0.5rem;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .chat-message.user {
            background: var(--jade-light);
            text-align: right;
        }

        .chat-message.bot {
            background: var(--glass-bg);
        }

        .section-transition {
            height: 60px;
            background: linear-gradient(to bottom, var(--midnight-blue), var(--jade-deep));
            clip-path: polygon(0 0, 100% 0, 100% 60%, 0 100%);
            margin: 2rem 0;
        }

        .weather-widget {
            position: fixed;
            top: 140px;
            right: 20px;
            background: var(--glass-bg);
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 0.85rem;
            text-align: center;
        }

        .weather-widget i {
            font-size: 1.2rem;
            color: var(--gold-luxe);
        }

        section {
            padding: 4rem 1rem;
            text-align: center;
        }

        h2 {
            font-size: clamp(1.8rem, 3vw, 2.2rem);
            color: var(--gold-luxe);
            margin-bottom: 1.5rem;
        }

        .gallery-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .gallery-filters button {
            background: var(--jade-deep);
            border: 2px solid var(--gold-luxe);
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--cream-soft);
        }

        .gallery-filters button.active,
        .gallery-filters button:hover {
            background: var(--gradient-accent);
            color: var(--midnight-blue);
        }

        .gallery-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .gallery-item img,
        .gallery-item video,
        .gallery-item model-viewer {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .caption {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 26, 36, 0.8);
            color: var(--cream-soft);
            padding: 0.8rem;
            font-size: 0.9rem;
            opacity: 0;
        }

        .gallery-item:hover .caption,
        .gallery-item:focus-within .caption {
            opacity: 1;
        }

        .cultural-note {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--luo-crimson);
            color: var(--cream-soft);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.8rem;
            opacity: 0;
        }

        .gallery-item:hover .cultural-note,
        .gallery-item:focus-within .cultural-note {
            opacity: 1;
        }

        .actions {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 0.5rem;
            opacity: 0;
        }

        .gallery-item:hover .actions,
        .gallery-item:focus-within .actions {
            opacity: 1;
        }

        .actions button {
            background: var(--gold-luxe);
            color: var(--midnight-blue);
            border: none;
            padding: 0.5rem;
            border-radius: 50%;
            font-size: 0.9rem;
        }

        .load-more {
            margin-top: 2rem;
            padding: 0.8rem 2rem;
            font-size: 1rem;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            border-radius: 8px;
        }

        .panorama-container {
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 12px;
            height: 500px;
        }

        #panorama-viewer {
            width: 100%;
            height: 100%;
        }

        .hotspot-label {
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .guestbook-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .guestbook-form input,
        .guestbook-form textarea {
            padding: 0.8rem;
            margin-bottom: 1rem;
            border: 1px solid var(--jade-light);
            border-radius: 6px;
            background: var(--midnight-blue);
            color: var(--cream-soft);
            font-size: 0.9rem;
        }

        .guestbook-form button {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            border-radius: 8px;
        }

        .guestbook-entries {
            max-width: 800px;
            margin: 2rem auto;
            display: grid;
            gap: 1rem;
        }

        .guestbook-entry {
            background: var(--jade-deep);
            padding: 1rem;
            border-radius: 8px;
        }

        .shop-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .shop-item {
            background: var(--midnight-blue);
            border-radius: 10px;
            padding: 1rem;
        }

        .shop-item img,
        .shop-item model-viewer {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }

        .shop-item h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .shop-item p {
            font-size: 0.9rem;
            color: var(--jade-light);
            margin-bottom: 1rem;
        }

        .shop-item button {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            border-radius: 8px;
        }

        .ugc-carousel img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }

        .ugc-upload {
            max-width: 600px;
            margin: 2rem auto;
        }

        .ugc-upload input[type="file"] {
            padding: 0.8rem;
            border: 1px solid var(--jade-light);
            border-radius: 6px;
            background: var(--midnight-blue);
            color: var(--cream-soft);
            font-size: 0.9rem;
        }

        footer {
            background: var(--jade-deep);
            padding: 3rem 1rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }

        .footer-logo {
            width: 100px;
        }

        .newsletter-form input {
            padding: 0.8rem;
            border-radius: 6px;
            width: 100%;
            max-width: 300px;
            font-size: 0.9rem;
            background: var(--midnight-blue);
            color: var(--cream-soft);
        }

        .newsletter-form button {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            border-radius: 6px;
        }

        .footer-links a {
            margin: 0 1rem;
            font-size: 0.9rem;
        }

        .social-links a {
            margin: 0 1rem;
            font-size: 1.5rem;
        }

        .footer-certifications img {
            width: 80px;
            height: auto;
        }

        .scroll-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .sticky-booking {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            padding: 0.8rem 2rem;
            border-radius: 20px;
            font-size: 1rem;
        }

        .contact-popup {
            position: fixed;
            bottom: 140px;
            right: 20px;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .contact-form {
            display: none;
            position: fixed;
            bottom: 200px;
            right: 20px;
            background: var(--jade-deep);
            padding: 1.5rem;
            border-radius: 10px;
            width: 300px;
        }

        .contact-form.active {
            display: block;
        }

        .contact-form h4 {
            font-size: 1.2rem;
            color: var(--gold-luxe);
            margin-bottom: 1rem;
        }

        .contact-form input,
        .contact-form textarea {
            padding: 0.8rem;
            margin-bottom: 0.8rem;
            border: 1px solid var(--jade-light);
            border-radius: 6px;
            background: var(--midnight-blue);
            color: var(--cream-soft);
            font-size: 0.9rem;
        }

        .contact-form button {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            border-radius: 6px;
        }

        .shop-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .shop-modal.active {
            display: flex;
        }

        .shop-modal-content {
            background: var(--jade-deep);
            padding: 2rem;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            color: var(--cream-soft);
        }

        .shop-modal-content h3 {
            font-size: 1.5rem;
            color: var(--gold-luxe);
            margin-bottom: 1rem;
        }

        .shop-modal-content button {
            padding: 0.8rem 2rem;
            font-size: 1rem;
            background: var(--gradient-accent);
            color: var(--midnight-blue);
            border-radius: 8px;
            margin-right: 1rem;
        }

        @media (max-width: 1200px) {
            .gallery-grid,
            .shop-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            nav ul {
                display: none;
                flex-direction: column;
                width: 100%;
                background: var(--jade-deep);
                position: absolute;
                top: 100%;
                left: 0;
                padding: 1rem;
            }

            nav ul.active {
                display: flex;
            }

            .menu-toggle {
                display: block;
            }

            .hero {
                height: 60vh;
            }

            .gallery-grid,
            .shop-grid {
                grid-template-columns: 1fr;
            }

            .assistant-chat,
            .contact-form {
                width: 90%;
                max-width: 280px;
            }
        }

        @media (max-width: 480px) {
            h2 {
                font-size: clamp(1.5rem, 2.5vw, 1.8rem);
            }

            .header-container {
                padding: 0 1rem;
            }

            .cta-button,
            .load-more,
            .shop-item button,
            .guestbook-form button,
            .newsletter-form button {
                padding: 0.6rem 1.5rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link" data-translate="skipLink">Skip to main content</a>
    <div class="progress-bar" role="progressbar" aria-label="Page scroll progress"></div>
    <header class="sticky-header" role="banner">
        <div class="header-container">
            <div class="brand">
                <a href="index.html" aria-label="Return to homepage">
                    <picture>
                        <source srcset="logo/RL3.png" type="image/jpg">
                        <img src="logo/RL3.png" alt="Ambururu Waterfalls Resort Logo" class="logo" width="60" height="60" loading="eager">
                    </picture>
                    <h1>Ambururu</h1>
                </a>
            </div>
            <button class="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            <nav role="navigation" aria-label="Main navigation">
                <ul>
                    <li><a href="index.html" data-translate="nav.home">Home</a></li>
                    <li class="dropdown">
                        <a href="about.html" aria-haspopup="true" aria-expanded="false" data-translate="nav.about">About <i class="fas fa-caret-down"></i></a>
                        <div class="dropdown-menu">
                            <a href="about.html#history" data-translate="nav.aboutHistory">History</a>
                            <a href="about.html#owner" data-translate="nav.aboutFounder">Our Founder</a>
                            <a href="about.html#community-impact" data-translate="nav.aboutCommunity">Community Impact</a>
                            <a href="about.html#attractions" data-translate="nav.aboutAttractions">Nearby Attractions</a>
                        </div>
                    </li>
                    <li><a href="gallery.html" class="active" aria-current="page" data-translate="nav.gallery">Gallery</a></li>
                    <li class="dropdown">
                        <a href="activities.html" aria-haspopup="true" aria-expanded="false" data-translate="nav.experiences">Experiences <i class="fas fa-caret-down"></i></a>
                        <div class="dropdown-menu">
                            <a href="activities.html#cultural-tours" data-translate="nav.experiencesCultural">Cultural Tours</a>
                            <a href="activities.html#hiking" data-translate="nav.experiencesHiking">Yala Valley Trails</a>
                            <a href="activities.html#wellness" data-translate="nav.experiencesWellness">Wellness Retreats</a>
                        </div>
                    </li>
                    <li><a href="accommodations.html" data-translate="nav.accommodations">Accommodations</a></li>
                    <li><a href="dining.html" data-translate="nav.dining">Dining</a></li>
                    <li><a href="events.html" data-translate="nav.events">Events</a></li>
                    <li><a href="contact.html" data-translate="nav.contact">Contact</a></li>
                    <li><a href="journal.html" data-translate="nav.journal">Journal</a></li>
                </ul>
            </nav>
            <div class="language-toggle">
                <select id="language-select" aria-label="Select website language">
                    <option value="en">English</option>
                    <option value="sw">Swahili</option>
                    <option value="luo">Luo</option>
                </select>
            </div>
            <button class="dark-mode-toggle" aria-label="Toggle dark mode">
                <i class="fas fa-moon"></i>
            </button>
            <button class="contrast-toggle" aria-label="Toggle high contrast mode">
                <i class="fas fa-eye"></i>
            </button>
        </div>
    </header>
    <main id="main-content" role="main">
        <div class="music-player">
            <button id="music-toggle" aria-label="Toggle background music">
                <i class="fas fa-volume-up"></i>
            </button>
        </div>
        <div class="weather-widget" aria-label="Current weather at Ambururu">
            <i class="fas fa-cloud-sun"></i>
            <p id="weather-info">Loading weather...</p>
        </div>
        <div class="virtual-assistant">
            <div class="assistant-orb" role="button" aria-label="Open virtual assistant" tabindex="0">
                <i class="fas fa-robot"></i>
            </div>
            <div class="assistant-chat">
                <div class="chat-history" aria-live="polite"></div>
                <input type="text" id="assistant-input" placeholder="Ask about gallery or Ambururu..." aria-label="Virtual assistant input" data-translate-placeholder="assistant.prompt">
                <button id="assistant-voice" aria-label="Use voice input"><i class="fas fa-microphone"></i></button>
                <button id="assistant-submit" data-translate="assistant.submit">Ask</button>
            </div>
        </div>
        <section class="hero" role="region" aria-label="Hero section">
            <video class="hero-video" autoplay loop muted playsinline poster="/assets/images/gallery-hero.avif">
                <source src="/videos/11.mp4" type="video/mp4">
            </video>
            <div class="hero-overlay">
                <h2 data-translate="hero.title">Discover Ambururu’s Soul</h2>
                <p data-translate="hero.subtitle">Immerse in vibrant visuals, AR experiences, 360° tours, and the rich Luo heritage of Siaya’s eco-luxury haven.</p>
                <a href="#gallery" class="cta-button" data-translate="hero.cta">Begin Your Journey</a>
            </div>
        </section>
        <div class="section-transition"></div>
        <section class="video-hero" role="region" aria-label="Video showcase section">
            <h2 data-translate="video.title">A Glimpse of Paradise</h2>
            <div class="video-container">
                <video class="plyr" controls poster="/assets/images/video-poster.avif" preload="metadata" aria-label="Cinematic tour of Ambururu Waterfalls and Resort">
                    <source src="/images/41.mp4" type="video/mp4">
                    <track kind="captions" src="/assets/videos/ambururu-tour.vtt" srclang="en" label="English" default>
                </video>
            </div>
            <p class="video-cta" data-translate="video.cta">Let Ambururu’s beauty captivate you!</p>
        </section>
        <div class="section-transition"></div>
        <section class="storytelling-section" role="region" aria-label="Cultural stories">
            <h2 data-translate="storytelling.title">Stories of Ambururu</h2>
            <div class="storytelling-grid">
                <div class="story-card">
                    <img src="/assets/images/luo-legend.avif" alt="Luo cultural performance" loading="lazy" width="300" height="200">
                    <h3 data-translate="storytelling.story1.title">The Legend of Yala</h3>
                    <p data-translate="storytelling.story1.desc">Discover the ancient Luo tale of how the Yala River shaped Ambururu’s sacred waterfalls.</p>
                    <a href="journal.html#yala-legend" class="read-more" data-translate="storytelling.readMore">Read More</a>
                </div>
                <div class="story-card">
                    <img src="/assets/images/eco-vision.avif" alt="Sustainable eco-lodge" loading="lazy" width="300" height="200">
                    <h3 data-translate="storytelling.story2.title">Our Eco-Vision</h3>
                    <p data-translate="storytelling.story2.desc">Learn how Ambururu blends luxury with sustainability to preserve Siaya’s natural beauty.</p>
                    <a href="journal.html#eco-vision" class="read-more" data-translate="storytelling.readMore">Read More</a>
                </div>
                <div class="story-card">
                    <img src="/assets/images/community-impact.avif" alt="Community empowerment" loading="lazy" width="300" height="200">
                    <h3 data-translate="storytelling.story3.title">Empowering Siaya</h3>
                    <p data-translate="storytelling.story3.desc">Explore our initiatives empowering local artisans and youth through cultural preservation.</p>
                    <a href="journal.html#community" class="read-more" data-translate="storytelling.readMore">Read More</a>
                </div>
            </div>
        </section>
        <div class="section-transition"></div>
        <section class="gallery" id="gallery" role="region" aria-label="Photo and media gallery">
            <h2 data-translate="gallery.title">Captured Moments</h2>
            <div class="gallery-filters" role="tablist">
                <button data-filter="all" class="active" role="tab" aria-selected="true" data-translate="gallery.filterAll">All</button>
                <button data-filter="waterfalls" role="tab" aria-selected="false" data-translate="gallery.filterWaterfalls">Waterfalls</button>
                <button data-filter="resort" role="tab" aria-selected="false" data-translate="gallery.filterResort">Resort</button>
                <button data-filter="activities" role="tab" aria-selected="false" data-translate="gallery.filterActivities">Activities</button>
                <button data-filter="events" role="tab" aria-selected="false" data-translate="gallery.filterEvents">Events</button>
                <button data-filter="ar" role="tab" aria-selected="false" data-translate="gallery.filterAR">AR Models</button>
            </div>
            <div class="gallery-grid pswp-gallery" role="grid">
                <a href="/images/29.jpg" class="gallery-item" data-pswp-width="1600" data-pswp-height="1000" data-category="waterfalls" role="gridcell" aria-label="Sunrise Cascades">
                    <picture>
                        <source srcset="/images/30.jpg" type="image/avif">
                        <img src="/images/30.jpg" alt="Ambururu Waterfalls at sunrise" loading="lazy" width="250" height="200">
                    </picture>
                    <div class="caption" data-translate="gallery.captionSunrise">Sunrise Cascades</div>
                    <span class="cultural-note" data-translate="gallery.noteWaterfalls">Luo sacred waters</span>
                    <div class="actions">
                        <button class="like-btn" aria-label="Like this image"><i class="fas fa-heart"></i></button>
                        <button class="share-btn" aria-label="Share this image"><i class="fas fa-share"></i></button>
                        <button class="download-btn" data-product-id="prod_sunrise" aria-label="Purchase high-resolution image"><i class="fas fa-shopping-cart"></i></button>
                        <button class="narration-btn" aria-label="Play narration"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <audio src="/videos/0529.MP3" preload="none" class="narration" aria-label="Narration for Sunrise Cascades"></audio>
                </a>
                <a href="/videos/0529.mp4" class="gallery-item" data-pswp-type="video" data-category="waterfalls" role="gridcell" aria-label="Waterfall Flow Video">
                    <video poster="/videos/0529-Cover.jpg" muted>
                        <source src="/videos/0529.mp4" type="video/mp4">
                    </video>
                    <div class="caption" data-translate="gallery.captionVideo">Waterfall Flow</div>
                    <span class="cultural-note" data-translate="gallery.noteYala">Yala River heritage</span>
                    <div class="actions">
                        <button class="like-btn" aria-label="Like this video"><i class="fas fa-heart"></i></button>
                        <button class="share-btn" aria-label="Share this video"><i class="fas fa-share"></i></button>
                        <button class="download-btn" data-product-id="prod_waterfall_video" aria-label="Purchase high-resolution video"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </a>
                <div class="gallery-item" data-category="ar" role="gridcell" aria-label="Luo Artifact AR Model">
                    <model-viewer src="/assets/models/luo-artifact.glb" ar ar-modes="webxr scene-viewer quick-look" camera-controls auto-rotate poster="/assets/images/artifact-poster.avif" alt="3D model of Luo cultural artifact" loading="lazy">
                    </model-viewer>
                    <div class="caption" data-translate="gallery.captionAR">Luo Artifact</div>
                    <span class="cultural-note" data-translate="gallery.noteArtifact">Luo cultural heritage</span>
                    <div class="actions">
                        <button class="like-btn" aria-label="Like this model"><i class="fas fa-heart"></i></button>
                        <button class="share-btn" aria-label="Share this model"><i class="fas fa-share"></i></button>
                        <button class="narration-btn" aria-label="Play narration"><i class="fas fa-volume-up"></i></button>
                    </div>
                    <audio src="/assets/audio/artifact-narration.mp3" preload="none" class="narration" aria-label="Narration for Luo Artifact"></audio>
                </div>
                <a href="/images/43.jpg" class="gallery-item" data-pswp-width="1600" data-pswp-height="1000" data-category="events" role="gridcell" aria-label="Luo Cultural Dance">
                    <picture>
                        <source srcset="/images/44.jpg" type="image/avif">
                        <img src="images/44.jpg" alt="Luo cultural dance performance" loading="lazy" width="250" height="200">
                    </picture>
                    <div class="caption" data-translate="gallery.captionDance">Luo Cultural Dance</div>
                    <span class="cultural-note" data-translate="gallery.noteDance">Annual festival highlight</span>
                    <div class="actions">
                        <button class="like-btn" aria-label="Like this image"><i class="fas fa-heart"></i></button>
                        <button class="share-btn" aria-label="Share this image"><i class="fas fa-share"></i></button>
                        <button class="download-btn" data-product-id="prod_dance" aria-label="Purchase high-resolution image"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </a>
            </div>
            <button class="load-more cta-button" data-translate="gallery.loadMore">Discover More</button>
            <div class="live-region-announcer" aria-live="polite" id="announcements"></div>
        </section>
        <div class="section-transition"></div>
        <section class="panorama-section" role="region" aria-label="360 panorama tour">
            <h2 data-translate="panorama.title">Explore in 360°</h2>
            <div class="panorama-container" id="panorama-viewer"></div>
        </section>
        <div class="section-transition"></div>
        <section class="timeline-section" role="region" aria-label="Ambururu timeline">
            <h2 data-translate="timeline.title">Our Journey</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="fas fa-tree"></i></div>
                    <div class="timeline-content">
                        <h3 data-translate="timeline.event1.title">1995: Founding Vision</h3>
                        <p data-translate="timeline.event1.desc">Ambururu’s eco-luxury vision begins with a commitment to preserve Siaya’s natural beauty.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="fas fa-home"></i></div>
                    <div class="timeline-content">
                        <h3 data-translate="timeline.event2.title">2005: Eco-Lodge Opens</h3>
                        <p data-translate="timeline.event2.desc">The first sustainable eco-lodge welcomes guests, blending luxury with nature.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="fas fa-award"></i></div>
                    <div class="timeline-content">
                        <h3 data-translate="timeline.event3.title">2015: Eco Warrior Award</h3>
                        <p data-translate="timeline.event3.desc">Ambururu receives the Eco Warrior Award for sustainable tourism practices.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="fas fa-users"></i></div>
                    <div class="timeline-content">
                        <h3 data-translate="timeline.event4.title">2025: Cultural Festival</h3>
                        <p data-translate="timeline.event4.desc">The annual Luo Cultural Festival celebrates 30 years of Ambururu’s legacy.</p>
                    </div>
                </div>
            </div>
        </section>
        <div class="section-transition"></div>
        <section class="guestbook-section" role="region" aria-label="Guestbook">
            <h2 data-translate="guestbook.title">Your Ambururu Story</h2>
            <form class="guestbook-form" id="guestbook-form">
                <label for="guest-name" data-translate="guestbook.nameLabel">Your Name</label>
                <input type="text" id="guest-name" name="name" required aria-required="true">
                <label for="guest-message" data-translate="guestbook.messageLabel">Your Story</label>
                <textarea id="guest-message" name="message" rows="4" required aria-required="true"></textarea>
                <button type="submit" data-translate="guestbook.submit">Share Your Story</button>
            </form>
            <div class="guestbook-entries" id="guestbook-entries"></div>
        </section>
        <div class="section-transition"></div>
        <section class="shop-section" role="region" aria-label="Shop section">
            <h2 data-translate="shop.title">Ambururu Treasures</h2>
            <div class="shop-grid">
                <div class="shop-item">
                    <picture>
                        <source srcset="/assets/images/sunrise-print.avif" type="image/avif">
                        <img src="/assets/images/sunrise-print.jpg" alt="Sunrise Cascades Print" loading="lazy" width="250" height="200">
                    </picture>
                    <h4>Sunrise Cascades Print</h4>
                    <p>High-quality canvas print of Ambururu’s iconic waterfall.</p>
                    <button data-product-id="prod_print_sunrise" data-translate="shop.buy">Buy Now - $29.99</button>
                </div>
                <div class="shop-item">
                    <model-viewer src="/assets/models/luo-artifact-replica.glb" ar ar-modes="webxr" camera-controls auto-rotate alt="Luo artifact replica" loading="lazy" width="250" height="200"></model-viewer>
                    <h4>Luo Artifact Replica</h4>
                    <p>Handcrafted replica of a traditional Luo artifact.</p>
                    <button data-product-id="prod_artifact_replica" data-translate="shop.buy">Buy Now - $79.99</button>
                </div>
                <div class="shop-item">
                    <picture>
                        <source srcset="/assets/images/luo-textile.avif" type="image/avif">
                        <img src="/assets/images/luo-textile.jpg" alt="Luo Textile Art" loading="lazy" width="250" height="200">
                    </picture>
                    <h4>Luo Textile Art</h4>
                    <p>Vibrant handwoven textile inspired by Luo patterns.</p>
                    <button data-product-id="prod_textile" data-translate="shop.buy">Buy Now - $49.99</button>
                </div>
            </div>
        </section>
        <div class="section-transition"></div>
        <section class="shop-moments" role="region" aria-label="Share your moments">
            <h2 data-translate="share.title">Share Your Ambururu Moments</h2>
            <p data-translate="share.text">
                Capture the essence of Ambururu and tag us on
                <a href="https://www.instagram.com/amburururesort/" target="_blank" rel="noopener">Instagram</a>,
                <a href="https://x.com/AmbururuResort" target="_blank" aria-label="X" rel="noopener">X</a>, and
                <a href="https://www.facebook.com/amburururesort/" target="_blank" rel="noopener">Facebook</a>
                with <span>#AmbururuStories</span> to be featured.
            </p>
            <div class="social-links">
                <a href="https://www.instagram.com/amburururesort/" target="_blank" rel="noopener" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://x.com/AmbururuResort" target="_blank" rel="noopener" aria-label="X"><i class="fab fa-x-twitter"></i></a>
                <a href="https://www.facebook.com/amburururesort/" target="_blank" rel="noopener" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            </div>
            <div class="ugc-carousel swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <picture>
                            <source srcset="/images/18.jpg" type="image/jpg">
                            <img src="/images/18.jpg" alt="Guest photo at Ambururu Waterfalls" loading="lazy" width="250" height="200">
                        </picture>
                    </div>
                    <div class="swiper-slide">
                        <picture>
                            <source srcset="/images/44.jpg" type="image/jpg">
                            <img src="/images/44.jpg" alt="Guest at Ambururu cultural event" loading="lazy" width="250" height="200">
                        </picture>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
            <form class="ugc-upload" id="ugc-upload-form">
                <label for="ugc-image" data-translate="share.label">Upload Your Photo</label>
                <input type="file" id="ugc-image" accept="image/*" aria-label="Upload photo" required>
                <button type="submit" data-translate="share.submit">Share</button>
            </form>
            <div class="loyalty-points" data-translate="share.points">Your Points: <span id="points">0</span></div>
        </section>
    </main>
    <footer role="contentinfo" aria-label="Footer">
        <div class="footer-container">
            <a href="index.html">
                <img src="/logo/l5.png" alt="Ambururu Footer Logo" class="footer-logo" width="100" height="100" loading="lazy">
            </a>
            <div class="newsletter">
                <h4 data-translate="footer.newsletterTitle">Stay Connected</h4>
                <form class="newsletter-form" id="newsletter-form" action="/subscribe" method="POST">
                    <input type="email" name="email" placeholder="Your Email" required aria-label="Email for newsletter" data-translate-placeholder="footer.emailPlaceholder">
                    <button type="submit" data-translate="footer.subscribe">Subscribe</button>
                </form>
            </div>
            <div class="footer-links">
                <a href="about.html" data-translate="footer.about">About</a>
                <a href="contact.html" data-translate="footer.contact">Contact</a>
                <a href="privacy.html" data-translate="footer.privacy">Privacy</a>
                <a href="terms.html" data-translate="footer.terms">Terms</a>
            </div>
            <div class="social-links">
                <a href="https://www.instagram.com/amburururesort/" target="_blank" rel="noopener" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://x.com/AmbururuResort/" target="_blank" rel="noopener" aria-label="Twitter"><i class="fab fa-x-twitter"></i></a>
                <a href="https://www.facebook.com/amburururesort/" target="_blank" rel="noopener" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            </div>
            <div class="footer-certifications">
                <img src="/logo/EW.jpeg" alt="Eco Tourism Certification" width="80" height="40" loading="lazy">
                <img src="/logo/ST.jpg" alt="Sustainable Travel Award" width="80" height="40" loading="lazy">
            </div>
        </div>
        <p>© 2025 Ambururu Waterfalls & Resort. All rights reserved.</p>
    </footer>
    <button class="scroll-to-top" aria-label="Scroll to top">
        <i class="fas fa-chevron-up"></i>
    </button>
    <a href="booking.html" class="sticky-booking" data-translate="book.now">Book Now</a>
    <div class="contact-popup" role="button" aria-label="Open contact form" tabindex="0">
        <i class="fas fa-envelope"></i>
    </div>
    <div class="contact-form" role="dialog" aria-label="Contact form">
        <h4 data-translate="contact.title">Get in Touch</h4>
        <form id="contact-form" action="/contact" method="POST">
            <input type="text" name="name" placeholder="Your Name" required aria-label="Your name" data-translate-placeholder="contact.name">
            <input type="email" name="email" placeholder="Your Email" required aria-label="Your email" data-translate-placeholder="contact.email">
            <textarea name="message" placeholder="Your Message" rows="4" required aria-label="Your message" data-translate-placeholder="contact.message"></textarea>
            <button type="submit" data-translate="contact.submit">Send</button>
        </form>
    </div>
    <div class="shop-modal" role="dialog" aria-label="Purchase modal">
        <div class="modal-content">
            <h3 id="modal-title" data-translate="shop.modal.title">Purchase Item</h3>
            <p id="modal-description"></p>
            <button id="modal-buy" data-translate="shop.modal.buy">Proceed to Checkout</button>
            <button id="modal-close" data-translate="shop.modal.close" aria-label="Close modal">Close</button>
        </div>
    </div>
    <audio id="backgroundMusic" loop preload="auto">
        <source src="/syn/edm004-synthwave-_-workoutturbo-drive-1989-358061.mp3" type="audio/mpeg">
    </audio>
    <script src="https://unpkg.com/photoswipe@5.4.2/dist/photoswipe.min.js" defer></script>
    <script src="https://unpkg.com/photoswipe@5.4.2/dist/photoswipe-lightbox.min.js" defer></script>
    <script src="https://cdn.plyr.io/3.6.12/plyr.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" defer></script>
    <script src="https://www.marzipano.net/js/marzipano.js" defer></script>
    <script src="https://unpkg.com/@google/model-viewer@3.2.0/dist/model-viewer.min.js" defer></script>
    <script src="https://js.stripe.com/v3/" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const darkModeToggle = document.querySelector('.dark-mode-toggle');
            const contrastToggle = document.querySelector('.contrast-toggle');
            const body = document.body;

            darkModeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-theme');
                darkModeToggle.querySelector('i').classList.toggle('fa-moon');
                darkModeToggle.querySelector('i').classList.toggle('fa-sun');
            });

            contrastToggle.addEventListener('click', () => {
                body.classList.toggle('high-contrast');
                contrastToggle.querySelector('i').classList.toggle('fa-eye');
                contrastToggle.querySelector('i').classList.toggle('fa-eye-slash');
            });

            const menuToggle = document.querySelector('.menu-toggle');
            const nav = document.querySelector('nav ul');
            menuToggle.addEventListener('click', () => {
                nav.classList.toggle('active');
                const isExpanded = nav.classList.contains('active');
                menuToggle.setAttribute('aria-expanded', isExpanded);
                menuToggle.querySelector('i').classList.toggle('fa-bars');
                menuToggle.querySelector('i').classList.toggle('fa-times');
            });

            const progressBar = document.querySelector('.progress-bar');
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                progressBar.style.width = `${scrollPercent}%`;
            });

            let lastScroll = 0;
            window.addEventListener('scroll', () => {
                const header = document.querySelector('.sticky-header');
                const currentScroll = window.scrollY;
                if (currentScroll > lastScroll && currentScroll > 80) {
                    header.classList.add('hidden');
                } else {
                    header.classList.remove('hidden');
                }
                lastScroll = currentScroll;
            });

            const scrollToTop = document.querySelector('.scroll-to-top');
            window.addEventListener('scroll', () => {
                scrollToTop.classList.toggle('visible', window.scrollY > 200);
            });
            scrollToTop.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            const musicToggle = document.querySelector('#music-toggle');
            const backgroundMusic = document.querySelector('#backgroundMusic');
            let isMusicPlaying = false;
            musicToggle.addEventListener('click', () => {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    musicToggle.querySelector('i').classList.replace('fa-volume-up', 'fa-volume-mute');
                } else {
                    backgroundMusic.play();
                    musicToggle.querySelector('i').classList.replace('fa-volume-mute', 'fa-volume-up');
                }
                isMusicPlaying = !isMusicPlaying;
            });

            const fetchWeather = async () => {
                try {
                    const response = await fetch('https://api.weatherapi.com/v1/current.json?key=https://maps.windows.com/?form=WNAMSH&entity=local_ypid%3AYN8091x9956867690424910424&collection=point.0.199973_34.741566_Ambururu%20Water%20Falls&q=Siaya,Kenya');
                    const data = await response.json();
                    const weatherInfo = document.querySelector('#weather-info');
                    weatherInfo.innerHTML = `
                        <img src="https:${data.current.condition.icon}" alt="${data.current.condition.text}" width="24" height="24">
                        <span>${data.current.temp_c}°C, ${data.current.condition.text}</span>
                    `;
                } catch (error) {
                    document.querySelector('#weather-info').textContent = 'Weather unavailable';
                }
            };
            fetchWeather();

            const assistantOrb = document.querySelector('.assistant-orb');
            const assistantChat = document.querySelector('.assistant-chat');
            const assistantInput = document.querySelector('#assistant-input');
            const assistantSubmit = document.querySelector('#assistant-submit');
            const chatHistory = document.querySelector('.chat-history');
            const assistantVoice = document.querySelector('#assistant-voice');

            assistantOrb.addEventListener('click', () => {
                assistantOrb.classList.toggle('active');
                assistantChat.style.display = assistantOrb.classList.contains('active') ? 'block' : 'none';
            });

            assistantSubmit.addEventListener('click', async () => {
                const query = assistantInput.value.trim();
                if (!query) return;
                const userMessage = document.createElement('div');
                userMessage.className = 'chat-message user';
                userMessage.textContent = query;
                chatHistory.appendChild(userMessage);
                assistantInput.value = '';

                try {
                    const response = await fetch('/api/assistant', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ query, context: 'Ambururu gallery page' })
                    });
                    const data = await response.json();
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chat-message bot';
                    botMessage.textContent = data.response || 'Sorry, I couldn’t assist with that.';
                    chatHistory.appendChild(botMessage);
                    chatHistory.scrollTop = chatHistory.scrollHeight;
                } catch (error) {
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chat-message bot';
                    botMessage.textContent = 'Error connecting to assistant.';
                    chatHistory.appendChild(botMessage);
                }
            });

            if ('webkitSpeechRecognitionMode' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                recognition.onresult = (event) => {
                    assistantInput.value = event.results[0][0].transcript;
                    recognition.stop();
                };
                assistantVoice.addEventListener('click', () => {
                    recognition.start();
                    assistantVoice.querySelector('i').classList.toggle('fa-microphone-slash');
                });
                recognition.onend = () => {
                    assistantVoice.querySelector('i').classList.toggle('fa-microphone-slash');
                };
            } else {
                assistantVoice.remove();
            }

            const lightbox = new PhotoSwipeLightbox({
                gallery: '.gallery-grid',
                children: 'a',
                pswpModule: PhotoSwipe
            });
            lightbox.init();

            const player = new Plyr('.plyr', { captions: { active: false } });

            const swiper = new Swiper('.swiper', {
                slidesPerView: 1,
                spaceBetween: 10,
                pagination: { el: '.swiper-pagination', clickable: true },
                breakpoints: { 768: { slidesPerView: 2 }, 1024: { slidesPerView: 3 } }
            });

            const panoramaViewer = document.querySelector('#panorama-viewer');
            const pano = new Marzipano.Viewer(panoramaViewer);
            const source = Marzipano.ImageUrlSource.fromString('/assets/panoramas/0.jpg');
            const geometry = new Marzipano.EquirectGeometry([{ width: 4096 }]);
            const view = new Marzipano.RectilinearView();
            const scene = pano.createScene({ source, geometry, view });
            scene.switchTo();

            const hotspotContainer = scene.hotspotContainer();
            const hotspot = hotspotContainer.createHotspot(document.createElement('div'), { yaw: 0.5, pitch: 0 });
            hotspot.domElement.classList.add('hotspot');
            hotspot.domElement.innerHTML = '<span class="hotspot-label" data-translate="panorama.caption1">Sacred Waterfall</span>';

            const filterButtons = document.querySelectorAll('.gallery-filters button');
            const galleryItems = document.querySelectorAll('.gallery-item');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    button.classList.add('active');
                    button.setAttribute('aria-selected', 'true');
                    const filter = button.getAttribute('data-filter');
                    galleryItems.forEach(item => {
                        const category = item.dataset.category;
                        item.style.display = filter === 'all' || filter === category ? 'block' : 'none';
                    });
                    document.querySelector('#announcements').textContent = `Filtered gallery to ${button.textContent}`;
                });
            });

            const loadMore = document.querySelector('.load-more');
            let page = 1;
            loadMore.addEventListener('click', async () => {
                page++;
                try {
                    const response = await fetch(`/api/gallery?page=${page}`);
                    const newItems = await response.json();
                    const galleryGrid = document.querySelector('.gallery-grid');
                    newItems.forEach(item => {
                        const galleryItem = document.createElement('a');
                        galleryItem.className = 'gallery-item';
                        galleryItem.href = item.url;
                        galleryItem.dataset.pswpWidth = item.width;
                        galleryItem.dataset.pswpHeight = item.height;
                        galleryItem.dataset.category = item.category;
                        galleryItem.setAttribute('role', 'gridcell');
                        galleryItem.setAttribute('aria-label', item.alt);
                        galleryItem.innerHTML = `
                            <picture>
                                <source srcset="${item.url}.avif" type="image/avif">
                                <img src="${item.url}.jpg" alt="${item.alt}" loading="lazy" width="250" height="200">
                            </picture>
                            <div class="caption" data-translate="gallery.caption_${item.id}">${item.caption}</div>
                            <span class="cultural-note" data-translate="gallery.note_${item.id}">${item.note}</span>
                            <div class="actions">
                                <button class="button" aria-label="Like this image"><i class="fas fa-heart"></i></button>
                                <button class="button" aria-label="Share this image"><i class="fas fa-share"></i></button>
                                <button class="button" data-product-id="prod_${item.id}" aria-label="Purchase high-res image"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        `;
                        galleryGrid.appendChild(galleryItem);
                    });
                    lightbox.init();
                    document.querySelector('#announcements').textContent = `Loaded more gallery items`;
                } catch (error) {
                    document.querySelector('#announcements').textContent = 'Failed to load items';
                }
            });

            const narrationButtons = document.querySelectorAll('.narration-btn');
            narrationButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const audio = button.parentElement.querySelector('audio.narration');
                    if (audio) {
                        if (audio.paused) {
                            audio.play();
                            button.querySelector('i').classList.replace('fa-volume-up', 'fa-volume-mute');
                        } else {
                            audio.pause();
                            button.querySelector('i').classList.replace('fa-volume-mute', 'fa-volume-up');
                        }
                    }
                });
            });

            const likeButtons = document.querySelectorAll('.like-btn');
            likeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    button.classList.toggle('liked');
                    button.querySelector('i').classList.toggle('fas');
                    button.querySelector('i').classList.toggle('far');
                    document.querySelector('#announcements').textContent = button.classList.contains('liked') ? 'Item liked' : 'Item unliked';
                });
            });

            const shareButtons = document.querySelectorAll('.share-btn');
            shareButtons.forEach(button => {
                button.addEventListener('click', async () => {
                    const shareData = {
                        title: 'Ambururu Waterfalls & Resort',
                        text: 'Check out this amazing moment from Ambururu!',
                        url: button.closest('a').href
                    };
                    try {
                        await navigator.share(shareData);
                        document.querySelector('#announcements').textContent = 'Shared successfully';
                    } catch (error) {
                        document.querySelector('#announcements').textContent = 'Sharing not supported';
                    }
                });
            });

            const stripe = Stripe('YOUR_STRIPE_PUBLIC_KEY');
            const downloadButtons = document.querySelectorAll('.download-btn');
            const shopButtons = document.querySelectorAll('.shop-item button');
            const modal = document.querySelector('.shop-modal');
            const modalTitle = document.querySelector('#modal-title');
            const modalDescription = document.querySelector('#modal-description');
            const modalBuy = document.querySelector('#modal-buy');
            const modalClose = document.querySelector('#modal-close');

            modalClose.addEventListener('click', () => {
                modal.classList.remove('active');
            });

            const guestbookForm = document.querySelector('#guestbook-form');
            const guestbookEntries = document.querySelector('#guestbook-entries');
            guestbookForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.querySelector('#guest-name').value;
                const message = document.querySelector('#guest-message').value;
                const entry = document.createElement('div');
                entry.className = 'guestbook-entry';
                entry.innerHTML = `
                    <h4>${name}</h4>
                    <p>${message}</p>
                `;
                guestbookEntries.prepend(entry);
                guestbookForm.reset();
                document.querySelector('#announcements').textContent = 'Story shared successfully';
                try {
                    await fetch('/api/guestbook', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name, message })
                    });
                } catch (error) {
                    console.error('Guestbook submission failed:', error);
                }
            });

            const ugcForm = document.querySelector('#ugc-upload-form');
            ugcForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const fileInput = document.querySelector('#ugc-image');
                const file = fileInput.files[0];
                if (!file) return;
                const formData = new FormData();
                formData.append('image', file);
                try {
                    const response = await fetch('/api/upload', {
                        method: 'POST',
                        body: formData
                    });
                    const data = await response.json();
                    const slide = document.createElement('div');
                    slide.className = 'swiper-slide';
                    slide.innerHTML = `
                        <picture>
                            <source srcset="${data.url}.avif" type="image/avif">
                            <img src="${data.url}.jpg" alt="User-uploaded Ambururu moment" loading="lazy" width="250" height="200">
                        </picture>
                    `;
                    document.querySelector('.swiper-wrapper').appendChild(slide);
                    swiper.update();
                    ugcForm.reset();
                    const points = document.querySelector('#points');
                    points.textContent = parseInt(points.textContent) + 10;
                    document.querySelector('#announcements').textContent = 'Photo shared successfully! Earned 10 points.';
                } catch (error) {
                    document.querySelector('#announcements').textContent = 'Failed to upload photo';
                }
            });

            const contactPopup = document.querySelector('.contact-popup');
            const contactFormPopup = document.querySelector('.contact-form');
            contactPopup.addEventListener('click', () => {
                contactFormPopup.classList.toggle('active');
            });

            const languageSelect = document.querySelector('#language-select');
            const translations = {
                en: {
                    skipLink: 'Skip to main content',
                    nav: {
                        home: 'Home',
                        about: 'About',
                        aboutHistory: 'History',
                        aboutFounder: 'Our Founder',
                        aboutCommunity: 'Community Impact',
                        aboutAttractions: 'Nearby Attractions',
                        gallery: 'Gallery',
                        experiences: 'Experiences',
                        experiencesCultural: 'Cultural Tours',
                        experiencesHiking: 'Yala Valley Trails',
                        experiencesWellness: 'Wellness Retreats',
                        accommodations: 'Accommodations',
                        dining: 'Dining',
                        events: 'Events',
                        contact: 'Contact',
                        journal: 'Journal'
                    },
                    hero: {
                        title: 'Discover Ambururu’s Soul',
                        subtitle: 'Immerse in vibrant visuals, AR experiences, 360° tours, and the rich Luo heritage of Siaya’s eco-luxury haven.',
                        cta: 'Begin Your Journey'
                    },
                    video: {
                        title: 'A Glimpse of Paradise',
                        cta: 'Let Ambururu’s beauty captivate you!'
                    },
                    storytelling: {
                        title: 'Stories of Ambururu',
                        story1: { title: 'The Legend of Yala', desc: 'Discover the ancient Luo tale of how the Yala River shaped Ambururu’s sacred waterfalls.' },
                        story2: { title: 'Our Eco Vision', desc: 'Learn how Ambururu blends luxury with sustainability to preserve Siaya’s natural beauty.' },
                        story3: { title: 'Empowering Siaya', desc: 'Explore our initiatives empowering local artisans and youth through cultural preservation.' },
                        readMore: 'Read More'
                    },
                    gallery: {
                        title: 'Captured Moments',
                        filterAll: 'All',
                        filterWaterfalls: 'Waterfalls',
                        filterResort: 'Resort',
                        filterActivities: 'Activities',
                        filterEvents: 'Events',
                        filterAR: 'AR Models',
                        captionSunrise: 'Sunrise Cascades',
                        captionVideo: 'Waterfall Flow',
                        captionArt: 'Luo Artifact',
                        captionDance: 'Luo Cultural Dance',
                        noteWaterfalls: 'Luo sacred waters',
                        noteYala: 'Yala River heritage',
                        noteArtifact: 'Luo cultural heritage',
                                            noteDance: 'Annual festival highlight',
                    loadMore: 'Discover More'
                },
                panorama: {
                    title: 'Explore in 360°',
                    caption1: 'Sacred Waterfall'
                },
                timeline: {
                    title: 'Our Journey',
                    event1: { title: '1995: Founding Vision', desc: 'Ambururu’s eco-luxury vision begins with a commitment to preserve Siaya’s natural beauty.' },
                    event2: { title: '2005: Eco-Lodge Opens', desc: 'The first sustainable eco-lodge welcomes guests, blending luxury with nature.' },
                   event3: { title: '2015: Eco Warrior Award', desc: 'Ambururu receives the Eco Warrior Award for sustainable tourism practices.' },
                    event4: { title: '2025: Cultural Festival', desc: 'The annual Luo Cultural Festival celebrates 30 years of Ambururu’s legacy.' }
                },
                guestbook: {
                    title: 'Your Ambururu Story',
                    nameLabel: 'Your Name',
                    messageLabel: 'Your Story',
                    submit: 'Share Your Story'
                },
                shop: {
                    title: 'Ambururu Treasures',
                    buy: 'Buy Now',
                    modal: {
                        title: 'Purchase Item',
                        buy: 'Proceed to Checkout',
                        close: 'Close'
                    }
                },
                share: {
                    title: 'Share Your Ambururu Moments',
                    text: 'Capture the essence of Ambururu and tag us on Instagram, X, and Facebook with #AmbururuStories to be featured.',
                    label: 'Upload Your Photo',
                    submit: 'Share',
                    points: 'Your Points: '
                },
                assistant: {
                    prompt: 'Ask about gallery or Ambururu...',
                    submit: 'Ask'
                },
                book: {
                    now: 'Book Now'
                },
                contact: {
                    title: 'Get in Touch',
                    name: 'Your Name',
                    email: 'Your Email',
                    message: 'Your Message',
                    submit: 'Send'
                },
                footer: {
                    newsletterTitle: 'Stay Connected',
                    emailPlaceholder: 'Your Email',
                    subscribe: 'Subscribe',
                    about: 'About',
                    contact: 'Contact',
                    privacy: 'Privacy',
                    terms: 'Terms'
                }
            },
            sw: {
                skipLink: 'Ruka hadi maudhui ya msingi',
                nav: {
                    home: 'Nyumbani',
                    about: 'Kuhusu',
                    aboutHistory: 'Historia',
                    aboutFounder: 'Mwanzilishi Wetu',
                    aboutCommunity: 'Athari za Jamii',
                    aboutAttractions: 'Vivutio vya Karibu',
                    gallery: 'Matunzio',
                    experiences: 'Uzoefu',
                    experiencesCultural: 'Ziara za Kitamaduni',
                    experiencesHiking: 'Njia za Yala Valley',
                    experiencesWellness: 'Mapumziko ya Afya',
                    accommodations: 'Malazi',
                    dining: 'Chakula',
                    events: 'Matukio',
                    contact: 'Wasiliana',
                    journal: 'Jarida'
                },
                hero: {
                    title: 'Gundua Moyo wa Ambururu',
                    subtitle: 'Jizamishe katika picha za kupendeza, uzoefu wa AR, ziara za 360°, na urithi wa Luo wa Siaya.',
                    cta: 'Anza Safari Yako'
                },
                video: {
                    title: 'Mwonekano wa Peponi',
                    cta: 'Wacha uzuri wa Ambururu ukushike!'
                },
                storytelling: {
                    title: 'Hadithi za Ambururu',
                    story1: { title: 'Hekaya ya Yala', desc: 'Gundua hadithi ya kale ya Luo kuhusu jinsi Mto Yala ulivyounda maporomoko ya Ambururu.' },
                    story2: {itle: 'Maono Yetu ya Mazingira', desc: 'Jifunze jinsi Ambururu inavyochanganya anasa na uhifadhi wa mazingira.' },
                    story3: { title: 'Kuiwezesha Siaya', desc: 'Chunguza mipango yetu ya kuwawezesha wasanii wa ndani na vijana.' },
                    readMore: 'Soma Zaidi'
                },
                gallery: {
                    title: 'Lakati Zilizokamatwa',
                    filterAll: 'Zote',
                    filterWaterfalls: 'Maporomoko ya Maji',
                    filterResort: 'Hoteli',
                    filterActivities: 'Shughuli',
                    filterEvents: 'Matukio',
                    filterAR: 'Mifano ya AR',
                    captionSunrise: 'Maporomoko ya Jua',
                    captionVideo: 'Mtiririko wa Maporomoko',
                    captionArt: 'Sanamu ya Luo',
                    captionDance: 'Ngoma ya Kitamaduni ya Luo',
                    noteWaterfalls: 'Maji takatifu ya Luo',
                    noteYala: 'Urithi wa Mto Yala',
                    noteArtifact: 'Urithi wa kitamaduni wa Luo',
                    noteDance: 'Mshangao wa tamasha la kila mwaka',
                    loadMore: 'Gundua Zaidi'
                },
                panorama: {
                    title: 'Chunguza katika 360°',
                    caption1: 'Maporomoko Takatifu'
                },
                timeline: {
                    title: 'Safari Yetu',
                    event1: { title: '1995: Maono ya Kuanzisha', desc: 'Maono ya anasa ya Ambururu yanaanza na kujitolea kuhifadhi uzuri wa Siaya.' },
                    event2: { title: '2005: Eco-Lodge Inafunguliwa', desc: 'Lodge ya kwanza ya mazingira inakaribisha wageni.' },
                    event3: { title: '2015: Tuzo ya Eco Warrior', desc: 'Ambururu inapokea Tuzo ya Eco Warrior kwa mazoezi ya utalii endelevu.' },
                    event4: { title: '2025: Tamasha la Kitamaduni', desc: 'Tamasha la Kitamaduni la Luo linasherehekea miaka 30 ya Ambururu.' }
                },
                guestbook: {
                    title: 'Hadithi Yako ya Ambururu',
                    nameLabel: 'Jina Lako',
                    messageLabel: 'Hadithi Yako',
                    submit: 'Shiriki Hadithi Yako'
                },
                shop: {
                    title: 'Hazina za Ambururu',
                    buy: 'Nunua Sasa',
                    modal: {
                        title: 'Nunua Bidhaa',
                        buy: 'Endelea na Malipo',
                        close: 'Funga'
                    }
                },
                share: {
                    title: 'Shiriki Matukio Yako ya Ambururu',
                    text: 'Nasa uzuri wa Ambururu na ututag kwenye Instagram, X, na Facebook na #AmbururuStories ili uonyeshwe.',
                    label: 'Pakia Picha Yako',
                    submit: 'Shiriki',
                    points: 'Pointi Zako: '
                },
                assistant: {
                    prompt: 'Uliza kuhusu matunzio au Ambururu...',
                    submit: 'Uliza'
                },
                book: {
                    now: 'Hifadhi Sasa'
                },
                contact: {
                    title: 'Wasiliana Nasi',
                    name: 'Jina Lako',
                    email: 'Barua Pepe Yako',
                    message: 'Ujumbe Wako',
                    submit: 'Tuma'
                },
                footer: {
                    newsletterTitle: 'Baki Umesambazwa',
                    emailPlaceholder: 'Barua Pepe Yako',
                    subscribe: 'Jiandikishe',
                    about: 'Kuhusu',
                    contact: 'Wasiliana',
                    privacy: 'Sera ya Faragha',
                    terms: 'Masharti'
                }
            },
            luo: {
                skipLink: 'Lor ng’ato e gik ma eno',
                nav: {
                    home: 'Ber',
                    about: 'Kaka Wan',
                    aboutHistory: 'Chon',
                    aboutFounder: 'Jachwech marach',
                    aboutCommunity: 'Ber marach ne oganda',
                    aboutAttractions: 'Gik ma ok biro kanyo',
                    gallery: 'Picha',
                    experiences: 'Ber marach',
                    experiencesCultural: 'Wanjo marach',
                    experiencesHiking: 'Njia marach e Yala Valley',
                    experiencesWellness: 'Ber marach marach',
                    accommodations: 'Ber marach',
                    dining: 'Chiemo',
                    events: 'Gik ma ok biro',
                    contact: 'Ber',
                    journal: 'Ber marach'
                },
                hero: {
                    title: 'Ng’iyo Ambururu marach',
                    subtitle: 'Picha marach, AR, 360°, kod kido marach marach e Siaya.',
                    cta: 'Chak Ruoth'
                },
                video: {
                    title: 'Ber marach',
                    cta: 'Wach Ambururu obed marach!'
                },
                storytelling: {
                    title: 'Ber marach marach',
                    story1: { title: 'Kwedo marach', desc: 'Ng’iyo kaka Mto Yala ne ochwe Ambururu marach.' },
                    story2: { title: 'Wach marach', descca: 'Ng’iyo kaka Ambururu okonyo piny marach.' },
                    story3: { title: 'Konyo Siaya', desc: 'Ng’iyo kaka wan okonyo jopiny kod nyithindo.' },
                    readMore: 'Som Zaidi'
                },
                gallery: {
                    title: 'Ber marach',
                    filterAll: 'Ber',
                    filterWaterfalls: 'Ber marach',
                    filterResort: 'Ber marach',
                    filterActivities: 'Ber marach',
                    filterEvents: 'Ber marach',
                    filterAR: 'Ber marach',
                    captionSunrise: 'Ber marach',
                    captionVideo: 'Ber marach',
                    captionArt: 'Ber marach',
                    captionDance: 'Ber marach',
                    noteWaterfalls: 'Ber marach',
                    noteYala: 'Ber marach',
                    noteArtifact: 'Ber marach',
                    noteDance: 'Ber marach',
                    loadMore: 'Ng’iyo Zaidi'
                },
                panorama: {
                    title: 'Ber marach e 360°',
                    caption1: 'Ber marach'
                },
                timeline: {
                    title: 'Ber marach',
                    event1: { title: '1995: Ber marach', desc: 'Ber marach marach marach Siaya.' },
                    event2: { title: '2005: Ber marach', desc: 'Ber marach marach marach.' },
                    event3: { title: '2015: Ber marach', desc: 'Ber marach marach marach.' },
                    event4: { title: '2025: Ber marach', desc: 'Ber marach marach marach.' }
                },
                guestbook: {
                    title: 'Ber marach',
                    nameLabel: 'Ber marach',
                    messageLabel: 'Ber marach',
                    submit: 'Ber marach'
                },
                shop: {
                    title: 'Ber marach',
                    buy: 'Ber marach',
                    modal: {
                        title: 'Ber marach',
                        buy: 'Ber marach',
                        close: 'Ber marach'
                    }
                },
                share: {
                    title: 'Ber marach',
                    text: 'Ber marach marach Ambururu e Instagram, X, kod Facebook kod #AmbururuStories.',
                    label: 'Ber marach',
                    submit: 'Ber marach',
                    points: 'Ber marach: '
                },
                assistant: {
                    prompt: 'Ber marach kuhusu picha kata Ambururu...',
                    submit: 'Ber marach'
                },
                book: {
                    now: 'Ber marach'
                },
                contact: {
                    title: 'Ber marach',
                    name: 'Ber marach',
                    email: 'Ber marach',
                    message: 'Ber marach',
                    submit: 'Ber marach'
                },
                footer: {
                    newsletterTitle: 'Ber marach',
                    emailPlaceholder: 'Ber marach',
                    subscribe: 'Ber marach',
                    about: 'Ber marach',
                    contact: 'Ber marach',
                    privacy: 'Ber marach',
                    terms: 'Ber marach'
                }
            }
        };

        const updateLanguage = (lang) => {
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                const keys = key.split('.');
                let translation = translations[lang];
                keys.forEach(k => translation = translation[k]);
                element.textContent = translation;
            });

            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                const keys = key.split('.');
                let translation = translations[lang];
                keys.forEach(k => translation = translation[k]);
                element.placeholder = translation;
            });

            document.querySelector('#announcements').textContent = `Language switched to ${lang === 'en' ? 'English' : lang === 'sw' ? 'Swahili' : 'Luo'}`;
        };

        languageSelect.addEventListener('change', () => {
            const selectedLang = languageSelect.value;
            updateLanguage(selectedLang);
            localStorage.setItem('language', selectedLang);
        });

        const savedLang = localStorage.getItem('language') || 'en';
        languageSelect.value = savedLang;
        updateLanguage(savedLang);

        const shopModal = document.querySelector('.shop-modal');
        // const modalTitle = document.querySelector('#modal-title'); // Removed duplicate declaration
        // const modalDescription = document.querySelector('#modal-description'); // Removed duplicate declaration
        // const modalBuy = document.querySelector('#modal-buy'); // Removed duplicate declaration
        // const modalClose = document.querySelector('#modal-close'); // Removed duplicate declaration

        const productDetails = {
            prod_sunrise: { name: 'Sunrise Cascades Print', price: 29.99, description: 'High-quality canvas print of Ambururu’s iconic waterfall.' },
            prod_waterfall_video: { name: 'Waterfall Flow Video', price: 19.99, description: 'High-resolution video capturing the serene flow of Ambururu’s waterfall.' },
            prod_dance: { name: 'Luo Cultural Dance Print', price: 29.99, description: 'Vibrant print of a traditional Luo dance performance.' },
            prod_print_sunrise: { name: 'Sunrise Cascades Print', price: 29.99, description: 'High-quality canvas print of Ambururu’s iconic waterfall.' },
            prod_artifact_replica: { name: 'Luo Artifact Replica', price: 79.99, description: 'Handcrafted replica of a traditional Luo artifact.' },
            prod_textile: { name: 'Luo Textile Art', price: 49.99, description: 'Vibrant handwoven textile inspired by Luo patterns.' }
        };

        const openShopModal = (productId) => {
            const product = productDetails[productId];
            if (product) {
                modalTitle.textContent = translations[languageSelect.value].shop.modal.title;
                modalDescription.textContent = `${product.description} - $${product.price.toFixed(2)}`;
                modalBuy.dataset.productId = productId;
                shopModal.classList.add('active');
            }
        };

        downloadButtons.forEach(button => {
            button.addEventListener('click', () => {
                const productId = button.dataset.productId;
                openShopModal(productId);
            });
        });

        shopButtons.forEach(button => {
            button.addEventListener('click', () => {
                const productId = button.dataset.productId;
                openShopModal(productId);
            });
        });

        modalBuy.addEventListener('click', async () => {
            const productId = modalBuy.dataset.productId;
            try {
                const response = await fetch('/api/checkout', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ productId })
                });
                const session = await response.json();
                const result = await stripe.redirectToCheckout({ sessionId: session.id });
                if (result.error) {
                    document.querySelector('#announcements').textContent = 'Checkout failed';
                }
            } catch (error) {
                document.querySelector('#announcements').textContent = 'Error initiating checkout';
            }
        });

        modalClose.addEventListener('click', () => {
            shopModal.classList.remove('active');
        });

        const contactForm = document.querySelector('#contact-form');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(contactForm);
            try {
                await fetch('/api/contact', {
                    method: 'POST',
                    body: formData
                });
                contactForm.reset();
                document.querySelector('.contact-form').classList.remove('active');
                document.querySelector('#announcements').textContent = 'Message sent successfully';
            } catch (error) {
                document.querySelector('#announcements').textContent = 'Failed to send message';
            }
        });

        const newsletterForm = document.querySelector('#newsletter-form');
        newsletterForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = newsletterForm.querySelector('input[name="email"]').value;
            try {
                await fetch('/api/subscribe', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                newsletterForm.reset();
                document.querySelector('#announcements').textContent = 'Subscribed successfully';
            } catch (error) {
                document.querySelector('#announcements').textContent = 'Subscription failed';
            }
        });

        const timelineItems = document.querySelectorAll('.timeline-item');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.2 });

        timelineItems.forEach(item => observer.observe(item));

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(error => {
                console.error('Service Worker registration failed:', error);
            });
        }
    });
    </script>
</body>
</html>